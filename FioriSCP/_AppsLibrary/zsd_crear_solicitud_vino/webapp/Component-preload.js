jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"conchaytoro/cl/zsd_crear_solicitud_vino/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","conchaytoro/cl/zsd_crear_solicitud_vino/model/models"],function(e,i,t){"use strict";return e.extend("conchaytoro.cl.zsd_crear_solicitud_vino.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(t.createDeviceModel(),"device")}})});
},
	"conchaytoro/cl/zsd_crear_solicitud_vino/controller/View1.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(e,t,a){"use strict";var r=null;var i="";return e.extend("conchaytoro.cl.zsd_crear_solicitud_vino.controller.View1",{onInit:function(){r=this;var e=new t;this.getView().setModel(e,"aux");this.fecha();var a={solicitud:[{name:"ZTCE",value:"Traslado Centro Enología"},{name:"ZTRI",value:"Traslado Intercompany"}]};var i=new t(a);this.getView().setModel(i,"rr")},onBeforeRendering:function(){},fecha:function(){var e=this.getView().byId("fecha");var t=new Date;e.setDateValue(t);e.setMinDate(t)},_position:function(){var e=0;var t=this.getView().byId("posTable");e=t.getItems().length;e=(e+1)*10;return e},_descript:function(e){var t=e.getSource().getParent().getCells()[2].getValue();var a=e.getSource().getParent().getCells()[4];a.removeAllItems();var s=e.getSource().getParent().getCells()[1].getSelectedKey();var l=r.getView().byId("centro").getSelectedKey();var o=e.getSource().getParent().getCells()[3];var n=e.getSource().getParent().getCells()[7];var u="Sin Descripción";var c=this.getOwnerComponent().getModel();c.read("/MaterialSet(Matnr='"+t+"',Werks='"+s+"')",{success:function(e){if(e.Matnr===""){sap.m.MessageBox.warning("¡Material no existe en Centro de Destino!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}else{c.read("/MaterialSet(Matnr='"+t+"',Werks='"+l+"')",{success:function(e){if(e.Matnr===""){sap.m.MessageBox.warning("¡Material no Existe en Centro Suministrador!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}else{u=e.Maktx;i=e.Meins;o.setProperty("text",u);n.setProperty("text",i);var r=[];var l=new sap.ui.model.Filter("Matnr",sap.ui.model.FilterOperator.EQ,t);r.push(l);l=new sap.ui.model.Filter("Werks",sap.ui.model.FilterOperator.EQ,s);r.push(l);c.read("/AlmacenSet",{success:function(e){e.results.forEach(function(e){var t=new sap.ui.core.ListItem({key:e.Lgort,text:e.Lgobe,additionalText:e.Lgort});a.addItem(t)})}.bind(this),filters:r})}}.bind(this),error:function(e){sap.m.MessageBox.error(e.message,{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}})}}.bind(this),error:function(e){sap.m.MessageBox.error(e.message,{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}})},onAdd:function(e){if(!this._validaCamposTabla()){return}var t=r.getView().byId("centro");var a=r.getView().byId("grupo");var i=t.getSelectedKey();var s=a.getSelectedKey();if(i===""||s===""){sap.m.MessageBox.warning("¡Favor Completar todos los Campos de Cabecera!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});return}sap.ui.core.BusyIndicator.show();var l=this._position();var o=new sap.m.ColumnListItem({cells:[new sap.m.Text({text:l}),new sap.m.ComboBox({required:true,showSecondaryValues:true,filterSecondaryValues:true,items:{path:"/CentroSet",sorter:{path:"Werks"},template:new sap.ui.core.ListItem({key:"{Werks}",text:"{Name1}",additionalText:"{Werks}"})},editable:true}),new sap.m.Input({maxLength:10,liveChange:function(e){var t=e.getSource().getParent().getCells()[1].getSelectedKey();var a=e.getSource().getParent().getCells()[2];if(t===""){sap.m.MessageBox.warning("¡Seleccione Centro de Destino!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});a.setValue("")}else{if(/^(M?\d{4}-?\d{4})|\d{6}$/.test(a.getValue())){r.handleValidationSuccess(e)}else{r.handleValidationError(e)}}},placeholder:"Ej: 2135-2019",editable:true}),new sap.m.Text({}),new sap.m.ComboBox({}),new sap.m.Input({maxLength:4,type:sap.m.Input.Number,placeholder:"Ej: 2020",editable:true}),new sap.m.Input({required:true,maxLength:12,type:sap.m.Input.Currency,liveChange:this.validaInput,placeholder:"Ej: 5.000",editable:true}),new sap.m.Text({}),new sap.m.DatePicker({valueFormat:"dd.MM.yyyy",displayFormat:"dd.MM.yyyy",required:true,validationError:"handleValidationError2",validationSuccess:"handleValidationSuccess2",editable:true,change:this.handleDate,minDate:new Date}),new sap.m.Input({maxLength:20,placeholder:"",editable:true}),new sap.m.Button({icon:"sap-icon://decline",width:"3em",press:[this.remove,this]})]});var n=r.getView().byId("posTable");n.addItem(o);sap.ui.core.BusyIndicator.hide()},validaInput:function(e){var t=e.getSource().getParent().getCells()[1].getSelectedKey();var a=e.getSource().getParent().getCells()[6];if(t===""){sap.m.MessageBox.warning("¡Seleccione Centro de Destino!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});a.setValue("")}else{r.addDot(e)}},addDot:function(e){if(!/^[\d]+(\.[\d]{3,})*(\,[\d]{1,3})?$/.test(e.getParameter("value"))){e.getSource().setValue(e.getParameter("value"));e.getSource().setValueState(sap.ui.core.ValueState.Error);return}e.getSource().setValueState(sap.ui.core.ValueState.Success);var t=e.getParameter("value");var a=t.split(".").join("");a=a.split(",");var r=a[0].split("").reverse();var i=[];var s="";var l=Math.ceil(r.length/3);for(var o=0;o<l;o++){for(var n=0;n<3;n++){if(r[n+o*3]!=undefined){s+=r[n+o*3]}}i.push(s);s="";if(a[1]!==undefined)e.getSource().setValue(i.join(".").split("").reverse().join("")+","+a[1]);else e.getSource().setValue(i.join(".").split("").reverse().join(""))}},clearInput:function(e){var t=this.getView().byId("solicitud");var a=this.getView().byId("centro");var r=this.getView().byId("grupo");var i=this.getView().byId("fecha");t.setValue("");a.setValue("");r.setValue("");i.setValue("")},clearCells:function(e){var t=this.getView().byId("posTable");t.removeAllItems()},_clearMatnr:function(){this.getView().byId("grupo").setValue("");this.clearCells()},onSave:function(e){if(!this._validaCamposTabla()){return}var t=this;var a=this.getView().byId("centro");var r=this.getView().byId("grupo");var i=this.getView().byId("fecha");var s=this.getView().byId("posTable");var l=a.getSelectedKey();var o=r.getSelectedKey();var n=i.getValue();var u=s.getItems();var c=[];u.forEach(function(e){c.push({Purchaseorder:"",PoItem:e.getCells()[0].getText(),ShortText:e.getCells()[3].getText(),Material:e.getCells()[2].getValue(),Plant:e.getCells()[1].getSelectedKey(),StgeLoc:e.getCells()[4].getSelectedKey(),Quantity:e.getCells()[6].getValue(),PoUnit:e.getCells()[7].getText(),CreatDate:e.getCells()[8].getValue(),Texto1:e.getCells()[5].getValue(),Texto2:e.getCells()[9].getValue()})});var g=this.getOwnerComponent().getModel("dos");var d={Purchaseorder:"",CreatDate:n,DocType:"ZTCE",PurchOrg:"",PurGroup:o,SupplPlnt:l,PedidoToPosiciones:c};sap.ui.core.BusyIndicator.show();g.create("/PedidoSet",d,{success:function(e){sap.ui.core.BusyIndicator.hide();if(e.Purchaseorder===""){sap.m.MessageBox.error("¡No fue Posible Crear Solicitud!",{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}else{sap.m.MessageBox.success("¡El pedido N° "+e.Purchaseorder+" ha sido Creado!",{title:"Confirmación",onClose:function(){t.clearInput();t.clearCells()},styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}}.bind(this),error:function(){sap.ui.core.BusyIndicator.hide();sap.m.MessageBox.error("¡Error al Crear Solicitud!",{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}.bind(this)})},handleValidationError:function(e){e.getSource().setValueState(sap.ui.core.ValueState.Error);var t=e.getSource().getParent().getCells()[3];var a=e.getSource().getParent().getCells()[7];t.setProperty("text","");a.setProperty("text","")},handleValidationSuccess:function(e){e.getSource().setValueState(sap.ui.core.ValueState.Success);r._descript(e)},handleValidationError2:function(e){e.getSource().setValueState(sap.ui.core.ValueState.Error);this.validaInput()},handleValidationSuccess2:function(e){e.getSource().setValueState(sap.ui.core.ValueState.Success);this.validaInput()},onSelectionChange:function(e){var t=this.getOwnerComponent().getModel("dos");var a=e.getParameter("listItem");t=a.getBindingContext().getObject()},edit:function(e){if(e.getSource().getProperty("icon")==="sap-icon://edit"){e.getSource().setProperty("icon","sap-icon://accept");var t=e.getSource().getParent();t.getCells().forEach(function(e){if(e.getMetadata()._sClassName==="sap.m.Input"){e.setEnabled(true);e.setEditable(true)}})}else{e.getSource().setProperty("icon","sap-icon://edit");var t=e.getSource().getParent();t.getCells().forEach(function(e){if(e.getMetadata()._sClassName==="sap.m.Input"){e.setEnabled(false);e.setEditable(false)}})}},remove:function(e){var t=r.getView().byId("posTable");t.removeItem(e.getSource().getParent())},_validaCamposTabla:function(){var e=r.getView().byId("posTable");if(e.getItems().length===0)return true;var t=true;e.getItems().forEach(function(e){if(!t){return}if(e.getCells()[1].getSelectedKey()===""||e.getCells()[2].getValue()===""||e.getCells()[2].getValueState()!==sap.ui.core.ValueState.Success||e.getCells()[3].getText()===""||e.getCells()[4].getSelectedKey()===""||e.getCells()[5].getValue()===""||e.getCells()[6].getValue()===""||e.getCells()[6].getValueState()!==sap.ui.core.ValueState.Success||e.getCells()[7].getText()===""||e.getCells()[8].getDateValue()===null||e.getCells()[8].getProperty("valueState")!==sap.ui.core.ValueState.None||!/^\d{2}.\d{2}.\d{4}$/.test(e.getCells()[8].getValue())){t=false;return}});if(!t)sap.m.MessageBox.error("¡Campos Vacíos o con Datos Erróneos!. Favor actualizar campos.",{title:"Error en campos",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});return t},handleDate:function(e){var t=e.getSource();var a=e.getParameter("valid");if(a){t.setValueState(sap.ui.core.ValueState.None)}else{t.setValueState(sap.ui.core.ValueState.Error)}}})});
},
	"conchaytoro/cl/zsd_crear_solicitud_vino/i18n/i18n.properties":'title=Title\nappTitle=Crear Solicitud de Vino\nappDescription=App Description\ntableTitleCount=Posiciones ({0})',
	"conchaytoro/cl/zsd_crear_solicitud_vino/i18n/i18n_es.properties":'title=Title\nappTitle=Crear Solicitud de Vino\nappDescription=App Description\ntableTitleCount=Posiciones ({0})',
	"conchaytoro/cl/zsd_crear_solicitud_vino/manifest.json":'{"_version":"1.8.0","sap.app":{"id":"conchaytoro.cl.zsd_crear_solicitud_vino","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","dataSources":{"mainService":{"uri":"/FioriSCP.conchaytoroclzsd_crear_solicitud_vino/sap/opu/odata/sap/ZMM_AYUDAS_BUSQUEDAS_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/metadata.xml"}},"mainService2":{"uri":"/FioriSCP.conchaytoroclzsd_crear_solicitud_vino/sap/opu/odata/sap/ZMM_CREA_PEDIDO_COMPRA_FIORI_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/metadata.xml"}}},"sourceTemplate":{"id":"ui5template.basicSAPUI5ApplicationProject","version":"1.38.11"}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_belize"]},"sap.ui5":{"rootView":{"viewName":"conchaytoro.cl.zsd_crear_solicitud_vino.view.View1","type":"XML"},"dependencies":{"minUI5Version":"1.30.0","libs":{"sap.ui.layout":{},"sap.ui.core":{},"sap.m":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"conchaytoro.cl.zsd_crear_solicitud_vino.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"defaultBindingMode":"TwoWay"}},"dos":{"dataSource":"mainService2","preload":true,"settings":{"defaultBindingMode":"TwoWay"}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"conchaytoro.cl.zsd_crear_solicitud_vino.view","controlAggregation":"pages","controlId":"idAppControl","clearControlAggregation":false},"routes":[{"name":"RouteView1","pattern":"RouteView1","target":["TargetView1"]}],"targets":{"TargetView1":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewName":"View1"}}}},"sap.platform.abap":{"uri":"/sap/bc/ui5_ui5/sap/zmm_solvino/webapp","_version":"1.1.0"}}',
	"conchaytoro/cl/zsd_crear_solicitud_vino/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"conchaytoro/cl/zsd_crear_solicitud_vino/view/Agregar.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"\n\txmlns:html="http://www.w3.org/1999/xhtml" xmlns:l="sap.ui.layout"><Dialog title="Agregar" contentWidth="550px"><content><f:SimpleForm id="formAddItem" layout="ResponsiveGridLayout" adjustLabelSpan="false" minWidth="1024" maxContainerCols="4" labelSpanXL="4"\n\t\t\t\tlabelSpanL="4" labelSpanM="12" labelSpanS="12" emptySpanXL="2" emptySpanL="2" emptySpanM="2" emptySpanS="0" columnsXL="2" columnsL="2"\n\t\t\t\tcolumnsM="1" editable="true"><Label text="Centro Destino"></Label><ComboBox id="cenDest" required="true" showSecondaryValues="true" filterSecondaryValues="true"\n\t\t\t\t\titems="{ path: \'/CentroSet\', sorter: { path: \'Werks\' } }"><core:ListItem key="{Werks}" text="{Name1}" additionalText="{Werks}"/></ComboBox><Label text="Fecha Entrega"></Label><DatePicker id="fechaEnt" displayFormat="dd.MM.yyyy" required="true" validationError="handleValidationError2"\n\t\t\t\t\tvalidationSuccess="handleValidationSuccess2"></DatePicker><Label text="Material" required="true"></Label><Input id="mat" maxLength="9" validationError="handleValidationError" validationSuccess="handleValidationSuccess"\n\t\t\t\t\tvalue="{path: \'aux>/name\', type: \'sap.ui.model.type.String\', constraints: { search: \'^\\\\d{4}-?\\\\d{4}$\' }}" valueLiveUpdate="true"\n\t\t\t\t\tplaceholder="Ej: 1112-2006"/><Label text="Descripción"></Label><Text id="descrip" text=""/><Label text="Cantidad"></Label><Input id="cant" required="true" maxLength="12" validationError="handleValidationError2" validationSuccess="handleValidationSuccess2"\n\t\t\t\t\tvalue="{path: \'aux>/cant\', type: \'sap.ui.model.type.String\', constraints: { search: \'^.*,?\\\\d+$\' }}" valueLiveUpdate="true"\n\t\t\t\t\tplaceholder="Ej: 5.000"/></f:SimpleForm></content><beginButton><Button id="btnAceptar" type="Accept" text="Crear" press="onAddNewRow"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow"/></layoutData></Button></beginButton><endButton><Button type="Reject" text="Cancelar" press="onCancel"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow"/></layoutData></Button></endButton></Dialog></core:FragmentDefinition>',
	"conchaytoro/cl/zsd_crear_solicitud_vino/view/View1.view.xml":'<mvc:View controllerName="conchaytoro.cl.zsd_crear_solicitud_vino.controller.View1" xmlns:mvc="sap.ui.core.mvc" xmlns:core="sap.ui.core"\n\txmlns:html="http://www.w3.org/1999/xhtml" displayBlock="true" xmlns="sap.m" xmlns:f="sap.ui.layout.form"><App id="idAppControl"><pages><Page title="Nueva Solicitud de Vino"><content><VBox class="sapUiSmallMargin"><f:SimpleForm layout="ResponsiveGridLayout" adjustLabelSpan="false" minWidth="1024" maxContainerCols="4" labelSpanXL="4" labelSpanL="4"\n\t\t\t\t\t\t\tlabelSpanM="12" labelSpanS="12" emptySpanXL="2" emptySpanL="2" emptySpanM="2" emptySpanS="0" columnsXL="2" columnsL="2" columnsM="1"\n\t\t\t\t\t\t\teditable="true"><Label text="Clase de Solicitud"></Label><Input id="solicitud" enabled="false" value="Traslado Centro Enología"/><Label text="Centro Suministrador" required="true"></Label><ComboBox id="centro" change="_clearMatnr" showSecondaryValues="true" filterSecondaryValues="true"\n\t\t\t\t\t\t\t\titems="{ path: \'/CentroSet\', sorter: { path: \'Werks\' } }"><core:ListItem key="{Werks}" text="{Werks} - {Name1}" additionalText="{Werks}"/></ComboBox><Label text="Grupo Compras" required="true"></Label><ComboBox id="grupo" showSecondaryValues="true" filterSecondaryValues="true" items="{ path: \'/GrupoCompraSet\', sorter: { path: \'Ekgrp\' } }"><core:ListItem key="{Ekgrp}" text="{Ekgrp} - {Eknam}" additionalText="{Ekgrp}"/></ComboBox><Label text="Fecha Documento" required="true"></Label><DatePicker id="fecha" displayFormat="dd.MM.yyyy" valueFormat="dd.MM.yyyy"></DatePicker></f:SimpleForm></VBox><VBox><f:SimpleForm layout="ResponsiveGridLayout" adjustLabelSpan="false" minWidth="1024"><ScrollContainer width="100%" horizontal="true" vertical="true" focusable="true"><Table id="posTable" updateFinished="onUpdateFinished"><headerToolbar><Toolbar><Title id="title" text=""/><ToolbarSpacer/><OverflowToolbarButton icon="sap-icon://add" press="onAdd"/></Toolbar></headerToolbar><columns><Column width="4em"><Text text="Posición"/></Column><Column width="15em"><Text text="Centro Destino"/></Column><Column width="9em"><Text text="Material"/></Column><Column width="25em"><Text text="Descripción"/></Column><Column width="10em"><Text text="Almacén"/></Column><Column width="7em"><Text text="Año"/></Column><Column width="6em"><Text text="Cantidad"/></Column><Column width="2em"><Text text="ud."/></Column><Column width="10em"><Text text="Fecha Entrega"/></Column><Column width="10em"><Text text="Nota"/></Column><Column width="3em"></Column><Column width="3em"></Column></columns></Table></ScrollContainer></f:SimpleForm></VBox></content><footer><OverflowToolbar id="otbFooter"><ToolbarSpacer/><Button type="Accept" text="Crear" press="onSave"><layoutData><OverflowToolbarLayoutData priority="NeverOverflow"/></layoutData></Button></OverflowToolbar></footer></Page></pages></App></mvc:View>'
}});
