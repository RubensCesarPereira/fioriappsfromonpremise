jQuery.sap.registerPreloadedModules({
"version":"2.0",
"modules":{
	"cl/conchaytoro/zpp_descomponer_mezcla/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","cl/conchaytoro/zpp_descomponer_mezcla/model/models"],function(e,o,t){"use strict";return e.extend("cl.conchaytoro.zpp_descomponer_mezcla.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(t.createDeviceModel(),"device")}})});
},
	"cl/conchaytoro/zpp_descomponer_mezcla/controller/App.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller"],function(n){"use strict";return n.extend("cl.conchaytoro.zpp_descomponer_mezcla.controller.App",{onInit:function(){}})});
},
	"cl/conchaytoro/zpp_descomponer_mezcla/controller/Materiales.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox","cl/conchaytoro/zpp_descomponer_mezcla/model/formatter"],function(e,t,a,r,i,o){"use strict";var s;return e.extend("cl.conchaytoro.zpp_descomponer_mezcla.controller.View1",{formatter:o,_cantidadMax:0,onInit:function(){$.sap.Adicion=["11016449","11016626","11003526","11013396","488000","488010","488510","497010","497310","489510"];var e=sap.ui.core.UIComponent.getRouterFor(this);e.getRoute("Materiales").attachPatternMatched(this._onObjectMatched,this)},_onObjectMatched:function(e){var t=e.getParameter("arguments").Orden;var r=this.getView().byId("orden");r.setText(t);var i=e.getParameter("arguments").Cantidad;var o=this.getView().byId("cantidad");o.setValue(i);this._cantidadMax=i;this.calculado=false;var s=this.getView().byId("tablaMateriales");var n=this.getOwnerComponent().getModel("dos");var l=[];var c=new sap.ui.model.Filter("Orden",sap.ui.model.FilterOperator.EQ,t);l.push(c);sap.ui.core.BusyIndicator.show();var u=this;n.read("/DesclistaSet",{filters:l,success:function(e){sap.ui.core.BusyIndicator.hide();s.setModel(new a(e.results),"materiales");s.getItems().forEach(function(e,t){e.getCells()[3].getCustomData()[0].setValue(e.getModel("materiales").getData()[t].Cantidad);if(s.getModel("materiales").oData[t].MTART!=""){e.setVisible(false)}});u.calculaComponente()},error:function(e){sap.ui.core.BusyIndicator.hide();s.setModel(new a([]),"materiales");sap.m.MessageBox.error("Error en El Servicio",{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}})},_onPageNavButtonPress:function(){var e=t.getInstance();var a=e.getPreviousHash();if(a!==undefined){window.history.go(-1)}else{var r=sap.ui.core.UIComponent.getRouterFor(this);r.navTo("RouteView1",{},true)}},calculaComponente:function(){this.calculado=true;var e=this.getView().byId("tablaMateriales");var t=Number(this.getView().byId("cantidad").getValue().split(".").join("").replace(",","."));var a=this._cantidadMax;var r=this.getView().byId("cantidad").getValue();var i=Number(this._cantidadMax.split(".").join("").replace(",","."));var o=0;var n=0;var l=0;if(t>i){sap.m.MessageBox.error("Stock ingresado supera el máximo disponible de "+this._cantidadMax,{title:"Error",onClose:function(){return},styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});this.calculado=false;return false}e.getItems().forEach(function(e,t){o=o+Number(e.getCells()[3].data("IniCant").trim().split(".").join("").replace(",","."))});s=e;e.getItems().forEach(function(e,a){if(s.getModel("materiales").oData[a].MTART==""){n=Number(e.getCells()[3].data("IniCant").trim().split(".").join("").replace(",","."));l=t*n/o;e.getCells()[3].setText(Intl.NumberFormat("de-DE").format(l.toFixed(3)))}});return true},addDot:function(e){this.calculado=false;if(!/^[\d]+(\.[\d]{3,})*(\,[\d]{1,3})?$/.test(e.getParameter("value"))){e.getSource().setValue(e.getParameter("value"));e.getSource().setValueState(sap.ui.core.ValueState.Error);return}e.getSource().setValueState(sap.ui.core.ValueState.Success);var t=e.getParameter("value");var a=t.split(".").join("");a=a.split(",");var r=a[0].split("").reverse();var i=[];var o="";var s=Math.ceil(r.length/3);for(var n=0;n<s;n++){for(var l=0;l<3;l++){if(r[l+n*3]!==undefined){o+=r[l+n*3]}}i.push(o);o="";if(a[1]!==undefined)e.getSource().setValue(i.join(".").split("").reverse().join("")+","+a[1]);else e.getSource().setValue(i.join(".").split("").reverse().join(""))}},onSave:function(){var e=this;var t=this.getOwnerComponent().getModel("dos");var a=this.getView().byId("orden").getText();if(!this.calculaComponente()){return}if(!this.calculado){i.warning("Los Datos fueron Actualizados. Vuelva a ejecutar Descomponer.");this.calculaComponente();return}var r=this.getView().byId("cantidad");var o=Number(r.getValue().split(".").join("").split(",").join("."));if(o>this.maxValue){i.error("¡Cantidad Supera Actual Stock Disponible!");return}else{var s={Orden:a,Quantity:o};sap.ui.core.BusyIndicator.show();t.create("/DescordenSet",s,{success:function(t){sap.ui.core.BusyIndicator.hide();sap.m.MessageBox.success("¡La Orden N° "+t.ROrden+" ha sido Creada!",{title:"Confirmación",onClose:function(){e._onPageNavButtonPress()},styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}.bind(this),error:function(t){sap.ui.core.BusyIndicator.hide();sap.m.MessageBox.error("¡Error al Crear Descomposición!",{title:"Error",onClose:function(){e._onPageNavButtonPress()},styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}.bind(this)})}}})});
},
	"cl/conchaytoro/zpp_descomponer_mezcla/controller/View1.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/model/json/JSONModel","sap/m/MessageBox","cl/conchaytoro/zpp_descomponer_mezcla/model/formatter"],function(e,t,a,i,o){"use strict";return e.extend("cl.conchaytoro.zpp_descomponer_mezcla.controller.View1",{formatter:o,onInit:function(){},_inputMaterial:function(e,t){var a=this.getView().byId("centro");var i=a.getSelectedKey();var o=this.getView().byId("codMezcla");var s=o.getValue();if(i===""){sap.m.MessageBox.warning("¡Favor seleccione Bodega!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});if(t.Matnr===""){sap.m.MessageBox.warning("¡Material No Existe en Bodega Seleccionada!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}s.setValue("")}else{if(/^(M?\d{4}-?\d{4})|\d{6}$/.test(s)){this.handleValidationSuccess2(e)}else{this.handleValidationError2(e)}}},_inputCompo:function(e){var t=this.getView().byId("codCompo");var a=t.getValue();var i=this.getView().byId("centro");var o=i.getSelectedKey();if(o===""){sap.m.MessageBox.warning("¡Favor seleccione Bodega!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit});if(oData.Matnr===""){sap.m.MessageBox.warning("¡Material No Existe en Bodega Seleccionada!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}a.setValue("")}else{if(/^(M?\d{4}-?\d{4})|\d{6}$/.test(a)){e.getSource().setValueState(sap.ui.core.ValueState.Success)}else{e.getSource().setValueState(sap.ui.core.ValueState.Error);this.clearCells()}}},handleValidationSuccess2:function(e){e.getSource().setValueState(sap.ui.core.ValueState.Success);this._inputDescript(e)},handleValidationError2:function(e){e.getSource().setValueState(sap.ui.core.ValueState.Error);var t=this.getView().byId("descripcion");t.setValue("");var a=this.getView().byId("codCompo");a.setValue("");a.setValueState(sap.ui.core.ValueState.Error);this.clearCells()},_inputDescript:function(e){var t=this.getView().byId("codMezcla");var a=t.getValue();var i=this.getView().byId("centro").getSelectedKey();var o=this.getView().byId("descripcion");var s="Sin Descripción";var r=this.getOwnerComponent().getModel();r.read("/MaterialSet(Matnr='"+a+"',Werks='"+i+"')",{success:function(e){if(e.Matnr===""){sap.m.MessageBox.warning("¡Material No Existe en Bodega Seleccionada!",{title:"Advertencia",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}else{s=e.Maktx;o.setValue(s)}}.bind(this),error:function(e){var t="hola";return t}})},clearCells:function(e){var t=this.getView().byId("tablaMezcla");t.removeAllItems()},_clearMatnr:function(){this.getView().byId("descripcion").setValue("");this.getView().byId("codMezcla").setValue("");this.getView().byId("codCompo").setValue("");this.getView().byId("codMezcla").setValueState(sap.ui.core.ValueState.None);this.getView().byId("codCompo").setValueState(sap.ui.core.ValueState.None);this.clearCells()},buscaMezclas:function(){var e=this.getView().byId("tablaMezcla");var t=this.getOwnerComponent().getModel("dos");var i=this.getView().byId("codMezcla");var o=this.getView().byId("centro");var s=this.getView().byId("codCompo");var r=i.getValue();var l=o.getSelectedKey();var n=s.getValue();if(i.getValue()===""||i.getValueState()!==sap.ui.core.ValueState.Success||o.getSelectedKey()===""||s.getValue()===""||s.getValueState()!==sap.ui.core.ValueState.Success){sap.m.MessageBox.error("¡Favor Completar Campos Vacíos!",{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}else{var c=[];var u=new sap.ui.model.Filter("Codigo",sap.ui.model.FilterOperator.EQ,r);c.push(u);u=new sap.ui.model.Filter("Codigo2",sap.ui.model.FilterOperator.EQ,n);c.push(u);u=new sap.ui.model.Filter("Bodega",sap.ui.model.FilterOperator.EQ,l);c.push(u);sap.ui.core.BusyIndicator.show();t.read("/DescomponerSet",{filters:c,success:function(t){sap.ui.core.BusyIndicator.hide();e.setModel(new a(t.results),"mezclas")},error:function(t){sap.ui.core.BusyIndicator.hide();e.setModel(new a([]),"mezclas");sap.m.MessageBox.error("Error en El Servicio",{title:"Error",onClose:null,styleClass:"",initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})}})}},onPress:function(e){var t=e.getSource().getCells()[6].getTitle();var a=e.getSource().getCells()[0].getText();var i=sap.ui.core.UIComponent.getRouterFor(this);i.navTo("Materiales",{Orden:t,Cantidad:a})}})});
},
	"cl/conchaytoro/zpp_descomponer_mezcla/i18n/i18n.properties":'title=Descomponer Mezcla\nappTitle=Descomposicion de Mezcla\nappDescription=App Description',
	"cl/conchaytoro/zpp_descomponer_mezcla/localService/Ordenes.json":'[{"Orden":"900000253","Material":"M2206-2018","Description":"CABERNET SAUVIGNON RIBERAS","Cantidad":140.456,"Almacen":"0005","Lote":"0000412536","Cosecha":2018},{"Orden":"900000105","Material":"M2206-2018","Description":"CABERNET SAUVIGNON RIBERAS","Cantidad":40.456,"Almacen":"0005","Lote":"0000412345","Cosecha":2017},{"Orden":"900000100","Material":"M1106-2018","Description":"SAUVIGNON CASILLERO","Cantidad":340.456,"Almacen":"0005","Lote":"0000412345","Cosecha":2016},{"Orden":"900000110","Material":"M2250-2018","Description":"CABERNET SAUVIGNON RIBERAS","Cantidad":50.456,"Almacen":"0005","Lote":"0000412345","Cosecha":2018},{"Orden":"900000140","Material":"M2250-2018","Description":"CABERNET SAUVIGNON RIBERAS","Cantidad":300.456,"Almacen":"0005","Lote":"0000412536","Cosecha":2017}]',
	"cl/conchaytoro/zpp_descomponer_mezcla/manifest.json":'{"_version":"1.12.0","sap.app":{"id":"cl.conchaytoro.zpp_descomponer_mezcla","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","dataSources":{"mainService":{"uri":"/clconchaytorozpp_descomponer_mezcla/sap/pou/odata/sap/ZMM_AYUDAS_BUSQUEDAS_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/metadata.xml"}},"mainService2":{"uri":"/clconchaytorozpp_descomponer_mezcla/sap/pou/odata/sap/ZPP_DESCOMPONER_MEZCLA_SRV/","type":"OData","settings":{"odataVersion":"2.0","localUri":"localService/metadata.xml"}}},"sourceTemplate":{"id":"ui5template.basicSAPUI5ApplicationProject","version":"1.38.11"}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"rootView":{"viewName":"cl.conchaytoro.zpp_descomponer_mezcla.view.App","type":"XML","async":true,"id":"App"},"dependencies":{"minUI5Version":"1.60.1","libs":{"sap.m":{},"sap.ui.core":{},"sap.ui.layout":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"cl.conchaytoro.zpp_descomponer_mezcla.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"defaultBindingMode":"TwoWay"}},"dos":{"dataSource":"mainService2","preload":true,"settings":{"defaultBindingMode":"TwoWay"}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"cl.conchaytoro.zpp_descomponer_mezcla.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"RouteView1","pattern":"","target":["TargetView1"]},{"name":"Materiales","pattern":"Materiales/{Orden}/{Cantidad}","target":["Materiales"]}],"targets":{"TargetView1":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"View1","viewName":"View1"},"Materiales":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"Materiales","viewName":"Materiales"},"App":{"viewType":"XML","viewName":"App"}}}},"sap.platform.abap":{"uri":"/sap/bc/ui5_ui5/sap/zpp_descom/webapp","_version":"1.1.0"}}',
	"cl/conchaytoro/zpp_descomponer_mezcla/model/formatter.js":function(){sap.ui.define([],function(){"use strict";return{currencyValue:function(r){if(!r){return""}return parseFloat(r).toFixed(2)},addDot:function(r){if(r===null)return"";var e=r.split(".")[1]?","+r.split(".")[1]:"";var t=r.split(".")[0].trim().split("");var i=[];t.forEach(function(r){switch(r){case".":break;case" ":break;default:i.push(r);break}});var n=i.join("");var a=n.split(".").join("");a=a.split(",");var u=a[0].split("").reverse();var s=[];var o="";var l=Math.ceil(u.length/3);for(var f=0;f<l;f++){for(var v=0;v<3;v++){if(u[v+f*3]!==undefined){o+=u[v+f*3]}}s.push(o);o=""}return s.join(".").split("").reverse().join("")+e},RenoveModel:function(r){return r}}});
},
	"cl/conchaytoro/zpp_descomponer_mezcla/model/models.js":function(){sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"cl/conchaytoro/zpp_descomponer_mezcla/view/App.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"\n\tcontrollerName="cl.conchaytoro.zpp_descomponer_mezcla.controller.App" xmlns:html="http://www.w3.org/1999/xhtml"><Shell id="shell"><App id="app"></App></Shell></mvc:View>',
	"cl/conchaytoro/zpp_descomponer_mezcla/view/Materiales.view.xml":'<mvc:View controllerName="cl.conchaytoro.zpp_descomponer_mezcla.controller.Materiales" class="sapUiSizeCompact" displayBlock="true"\n\txmlns:form="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m"><Page id="materiales" title="Lista de Materiales por Orden de Proceso" showFooter="true" showNavButton="true"\n\t\tnavButtonPress="_onPageNavButtonPress"><content><Table id="tablaMateriales" items="{materiales>/}" width="auto" class="sapUiResponsiveMargin"><headerToolbar><Toolbar height="100px"><Title text=""/><ToolbarSpacer/><Label text="Orden:" design="Bold"/><Text id="orden" text=""/><Label width="50px"/><Label text="Stock Disponible:" design="Bold"/><Input id="cantidad" width="150px" liveChange="addDot" submit="calculaComponente"/><ToolbarSpacer/></Toolbar></headerToolbar><columns><Column width="3em"><Text text="Posición"/></Column><Column width="7em"><Text text="Material"/></Column><Column width="12em"><Text text="Descripción"/></Column><Column width="5em"><Text text="Cantidad"/></Column><Column width="4em"><Text text="Almacén"/></Column><Column width="6em"><Text text="Lote"/></Column></columns><items><ColumnListItem><cells><Text text="{materiales>Posicion}"/><Text text="{materiales>Codigo2}"/><Text text="{materiales>Descripcion}"/><Text text="{path: \'materiales>Cantidad\', formatter: \'.formatter.addDot\'}"><customData><core:CustomData key="IniCant" value=""/></customData></Text><Text text="{materiales>LGORT}"/><Text text="{materiales>Lote}"/></cells></ColumnListItem></items></Table></content><footer><OverflowToolbar id="otbFooter"><ToolbarSpacer/><Button id="descomponer" type="Accept" text="Descomponer" press="onSave"/></OverflowToolbar></footer></Page></mvc:View>',
	"cl/conchaytoro/zpp_descomponer_mezcla/view/View1.view.xml":'<mvc:View controllerName="cl.conchaytoro.zpp_descomponer_mezcla.controller.View1" class="sapUiSizeCompact" displayBlock="true"\n\txmlns:form="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:l="sap.ui.layout"><Page id="page" title="{i18n>title}"><content><VBox class="sapUiTinyMargin"><form:SimpleForm id="SimpleFormDisplay480_12120Dual" layout="ResponsiveGridLayout" adjustLabelSpan="false" labelSpanXL="4" labelSpanL="4"\n\t\t\t\t\tlabelSpanM="12" labelSpanS="12" emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0" columnsXL="1" columnsL="1" columnsM="1"\n\t\t\t\t\teditable="true" singleContainerFullSize="false"><form:content><core:Title text=""/><Label text="Bodega" required="true"/><ComboBox id="centro" change="_clearMatnr" showSecondaryValues="true" filterSecondaryValues="true" width="350px"\n\t\t\t\t\t\t\titems="{ path: \'/CentroSet\', sorter: { path: \'Werks\' } }"><core:ListItem key="{Werks}" text="{Werks} - {Name1}" additionalText="{Werks}"/></ComboBox><Label text="Mezcla Descomponer" required="true"/><Input id="codMezcla" liveChange="_inputMaterial" width="350px"/><Label text="Descripción"/><Input id="descripcion" width="350px" change="activeButton" enabled="false"/><Label text="Código Componente" required="true"/><Input id="codCompo" liveChange="_inputCompo" width="350px"/></form:content></form:SimpleForm></VBox><ScrollContainer width="100%" horizontal="true" vertical="true" focusable="true"><Table id="tablaMezcla" width="auto" items="{mezclas>/}" updateFinished="onListUpdateFinished" noDataText="Sin Datos"\n\t\t\t\t\tbusyIndicatorDelay="{detailView>/lineItemTableDelay}" class="sapUiResponsiveMargin" growing="true" selectionChange="handleSelectionChange"><headerToolbar><Toolbar id="lineItemsToolbar"><Title id="lineItemsHeader" text="{detailView>/lineItemListTitle}"/></Toolbar></headerToolbar><columns><Column width="7em"><Text text="Stock Disponible"/></Column><Column width="5em"><Text text="Lote"/></Column><Column width="5em"><Text text="Material"/></Column><Column width="15em"><Text text="Descripción"/></Column><Column width="4em"><Text text="Almacén"/></Column><Column width="4em"><Text text="Cosecha"/></Column><Column width="5em" vAlign="Middle"><Text text="Orden"/></Column><Column width="4em"><Text text="Ver Lista"/><footer/></Column></columns><items><ColumnListItem vAlign="Middle" type="Navigation" press="onPress"><cells><Text text="{path: \'mezclas>Stock\', formatter: \'.formatter.addDot\'}"/><Text text="{mezclas>Lote}"/><Text text="{mezclas>Codigo}"/><Text text="{mezclas>Descripcion}"/><Text text="{mezclas>LGORT}"/><Text text="{mezclas>Cosecha}"/><ObjectIdentifier title="{mezclas>Orden}"/><Button icon="sap-icon://inspection" type="Emphasized" enabled="false" width="70px"/></cells></ColumnListItem></items></Table></ScrollContainer><VBox height="80px"/></content><footer><OverflowToolbar id="otbFooter1"><ToolbarSpacer/><Button id="buscar" type="Emphasized" text="Buscar" press="buscaMezclas" icon="sap-icon://search"/></OverflowToolbar></footer></Page></mvc:View>'
}});
