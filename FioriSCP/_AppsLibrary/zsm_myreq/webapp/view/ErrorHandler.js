/*
 * Copyright (C) 2009-2017 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox","zsm/itsm/myreq/cust/util/Util"],function(U,M,a){"use strict";return U.extend("zsm.itsm.myreq.cust.view.ErrorHandler",{constructor:function(c){this._oResourceBundle=c.getModel("i18n").getResourceBundle();this._oComponent=c;this._oModel=c.getModel();this._bMessageOpen=false;this._sErrorText=this._oResourceBundle.getText("errorText");this._oModel.attachMetadataFailed(function(e){var p=e.getParameters();this._showServiceError(p.response);},this);this._oModel.attachRequestFailed(function(e){var p=e.getParameters();if(p.response.statusCode!=="404"||(p.response.statusCode===404&&p.response.responseText.indexOf("Cannot POST")===0)){this._showServiceError(p.response);}},this);},_showServiceError:function(d){var e;if(a._bMessageOpen){return;}if(d.statusCode==="400"){var b=JSON.parse(d.responseText);if(b){var c=b.error.code;e=b.error.message.value;}switch(c){case"CRM_ORDER/013":break;default:break;}var f=a.getError().text;var g=a.getError().title;if(f){this._sErrorText=f;}}else{e=d;}a.showErrorMessageBox(f,g,e);}});});
